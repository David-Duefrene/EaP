generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "postgresql"
	url      = env("DATABASE_URL")
}

enum Gender {
	female
	male
}

enum LocationFlag {
	AutoFit
	Cargo
	CorpseBay
	DroneBay
	FleetHangar
	Deliveries
	HiddenModifiers
	Hangar
	HangarAll
	LoSlot0
	LoSlot1
	LoSlot2
	LoSlot3
	LoSlot4
	LoSlot5
	LoSlot6
	LoSlot7
	MedSlot0
	MedSlot1
	MedSlot2
	MedSlot3
	MedSlot4
	MedSlot5
	MedSlot6
	MedSlot7
	HiSlot0
	HiSlot1
	HiSlot2
	HiSlot3
	HiSlot4
	HiSlot5
	HiSlot6
	HiSlot7
	AssetSafety
	Locked
	Unlocked
	Implant
	QuafeBay
	RigSlot0
	RigSlot1
	RigSlot2
	RigSlot3
	RigSlot4
	RigSlot5
	RigSlot6
	RigSlot7
	ShipHangar
	SpecializedFuelBay
	SpecializedOreHold
	SpecializedGasHold
	SpecializedMineralHold
	SpecializedSalvageHold
	SpecializedShipHold
	SpecializedSmallShipHold
	SpecializedMediumShipHold
	SpecializedLargeShipHold
	SpecializedIndustrialShipHold
	SpecializedAmmoHold
	SpecializedCommandCenterHold
	SpecializedPlanetaryCommoditiesHold
	SpecializedMaterialBay
	SubSystemSlot0
	SubSystemSlot1
	SubSystemSlot2
	SubSystemSlot3
	SubSystemSlot4
	SubSystemSlot5
	SubSystemSlot6
	SubSystemSlot7
	FighterBay
	FighterTube0
	FighterTube1
	FighterTube2
	FighterTube3
	FighterTube4
	Module
}

enum Status {
	public
	private
}

enum MessageType {
	AcceptedAlly
	AcceptedSurrender
	AgentRetiredTrigravian
	AllAnchoringMsg
	AllMaintenanceBillMsg
	AllStrucInvulnerableMsg
	AllStructVulnerableMsg
	AllWarCorpJoinedAllianceMsg
	AllWarDeclaredMsg
	AllWarInvalidatedMsg
	AllWarRetractedMsg
	AllWarSurrenderMsg
	AllianceCapitalChanged
	AllianceWarDeclaredV2
	AllyContractCancelled
	AllyJoinedWarAggressorMsg
	AllyJoinedWarAllyMsg
	AllyJoinedWarDefenderMsg
	BattlePunishFriendlyFire
	BillOutOfMoneyMsg
	BillPaidCorpAllMsg
	BountyClaimMsg
	BountyESSShared
	BountyESSTaken
	BountyPlacedAlliance
	BountyPlacedChar
	BountyPlacedCorp
	BountyYourBountyClaimed
	BuddyConnectContactAdd
	CharAppAcceptMsg
	CharAppRejectMsg
	CharAppWithdrawMsg
	CharLeftCorpMsg
	CharMedalMsg
	CharTerminationMsg
	CloneActivationMsg
	CloneActivationMsg2
	CloneMovedMsg
	CloneRevokedMsg1
	CloneRevokedMsg2
	CombatOperationFinished
	ContactAdd
	ContactEdit
	ContainerPasswordMsg
	ContractRegionChangedToPochven
	CorpAllBillMsg
	CorpAppAcceptMsg
	CorpAppInvitedMsg
	CorpAppNewMsg
	CorpAppRejectCustomMsg
	CorpAppRejectMsg
	CorpBecameWarEligible
	CorpDividendMsg
	CorpFriendlyFireDisableTimerCompleted
	CorpFriendlyFireDisableTimerStarted
	CorpFriendlyFireEnableTimerCompleted
	CorpFriendlyFireEnableTimerStarted
	CorpKicked
	CorpLiquidationMsg
	CorpNewCEOMsg
	CorpNewsMsg
	CorpNoLongerWarEligible
	CorpOfficeExpirationMsg
	CorpStructLostMsg
	CorpTaxChangeMsg
	CorpVoteCEORevokedMsg
	CorpVoteMsg
	CorpWarDeclaredMsg
	CorpWarDeclaredV2
	CorpWarFightingLegalMsg
	CorpWarInvalidatedMsg
	CorpWarRetractedMsg
	CorpWarSurrenderMsg
	CustomsMsg
	DeclareWar
	DistrictAttacked
	DustAppAcceptedMsg
	ESSMainBankLink
	EntosisCaptureStarted
	ExpertSystemExpired
	ExpertSystemExpiryImminent
	FWAllianceKickMsg
	FWAllianceWarningMsg
	FWCharKickMsg
	FWCharRankGainMsg
	FWCharRankLossMsg
	FWCharWarningMsg
	FWCorpJoinMsg
	FWCorpKickMsg
	FWCorpLeaveMsg
	FWCorpWarningMsg
	FacWarCorpJoinRequestMsg
	FacWarCorpJoinWithdrawMsg
	FacWarCorpLeaveRequestMsg
	FacWarCorpLeaveWithdrawMsg
	FacWarLPDisqualifiedEvent
	FacWarLPDisqualifiedKill
	FacWarLPPayoutEvent
	FacWarLPPayoutKill
	GameTimeAdded
	GameTimeReceived
	GameTimeSent
	GiftReceived
	IHubDestroyedByBillFailure
	IncursionCompletedMsg
	IndustryOperationFinished
	IndustryTeamAuctionLost
	IndustryTeamAuctionWon
	InfrastructureHubBillAboutToExpire
	InsuranceExpirationMsg
	InsuranceFirstShipMsg
	InsuranceInvalidatedMsg
	InsuranceIssuedMsg
	InsurancePayoutMsg
	InvasionCompletedMsg
	InvasionSystemLogin
	InvasionSystemStart
	JumpCloneDeletedMsg1
	JumpCloneDeletedMsg2
	KillReportFinalBlow
	KillReportVictim
	KillRightAvailable
	KillRightAvailableOpen
	KillRightEarned
	KillRightUnavailable
	KillRightUnavailableOpen
	KillRightUsed
	LocateCharMsg
	MadeWarMutual
	MercOfferRetractedMsg
	MercOfferedNegotiationMsg
	MissionCanceledTriglavian
	MissionOfferExpirationMsg
	MissionTimeoutMsg
	MoonminingAutomaticFracture
	MoonminingExtractionCancelled
	MoonminingExtractionFinished
	MoonminingExtractionStarted
	MoonminingLaserFired
	MutualWarExpired
	MutualWarInviteAccepted
	MutualWarInviteRejected
	MutualWarInviteSent
	NPCStandingsGained
	NPCStandingsLost
	OfferToAllyRetracted
	OfferedSurrender
	OfferedToAlly
	OfficeLeaseCanceledInsufficientStandings
	OldLscMessages
	OperationFinished
	OrbitalAttacked
	OrbitalReinforced
	OwnershipTransferred
	RaffleCreated
	RaffleExpired
	RaffleFinished
	ReimbursementMsg
	ResearchMissionAvailableMsg
	RetractsWar
	SeasonalChallengeCompleted
	SovAllClaimAquiredMsg
	SovAllClaimLostMsg
	SovCommandNodeEventStarted
	SovCorpBillLateMsg
	SovCorpClaimFailMsg
	SovDisruptorMsg
	SovStationEnteredFreeport
	SovStructureDestroyed
	SovStructureReinforced
	SovStructureSelfDestructCancel
	SovStructureSelfDestructFinished
	SovStructureSelfDestructRequested
	SovereigntyIHDamageMsg
	SovereigntySBUDamageMsg
	SovereigntyTCUDamageMsg
	StationAggressionMsg1
	StationAggressionMsg2
	StationConquerMsg
	StationServiceDisabled
	StationServiceEnabled
	StationStateChangeMsg
	StoryLineMissionAvailableMsg
	StructureAnchoring
	StructureCourierContractChanged
	StructureDestroyed
	StructureFuelAlert
	StructureImpendingAbandonmentAssetsAtRisk
	StructureItemsDelivered
	StructureItemsMovedToSafety
	StructureLostArmor
	StructureLostShields
	StructureOnline
	StructureServicesOffline
	StructureUnanchoring
	StructureUnderAttack
	StructureWentHighPower
	StructureWentLowPower
	StructuresJobsCancelled
	StructuresJobsPaused
	StructuresReinforcementChanged
	TowerAlertMsg
	TowerResourceAlertMsg
	TransactionReversalMsg
	TutorialMsg
	WarAdopted
	WarAllyInherited
	WarAllyOfferDeclinedMsg
	WarConcordInvalidates
	WarDeclared
	WarEndedHqSecurityDrop
	WarHQRemovedFromSpace
	WarInherited
	WarInvalid
	WarRetracted
	WarRetractedByConcord
	WarSurrenderDeclinedMsg
	WarSurrenderOfferMsg
}

enum SenderType {
	character
	corporation
	alliance
	faction
	other
}

model Character {
	key        	 			Int @id @default(autoincrement())
	name      	 			String @unique
	createdAt 	 			DateTime @default(now())
	updatedAt 	 			DateTime @updatedAt
	characterID	 			String @unique
	characterSheet			CharacterSheet?
	agentResearch			AgentResearch[]
	blueprint				Blueprint[]
	corpHistory	 			CorpHistory[]
	Fatigue		 			Fatigue?
	Medals		 			Medal[]
	Notifications			Notification[]
	ContactNotifications	ContactNotification[]
	// CorpRoles				CorpRoles?
	// Standings				Standings[]
	// Title					Title?
}

model CharacterSheet {
	characterID				String @unique
	character 	 			Character @relation(fields: [characterID], references: [characterID])
	allianceID 	 			Int?
	birthday  	 			DateTime
	bloodlineID 			Int
	corporationID			Int
	description 			String?
	factionID 	 			Int?
	gender 		 			Gender
	name 					String @unique
	raceID 		 			Int
	securityStatus			Float?
	title 					String?
}

model AgentResearch {
	character		 		Character[]
	agentID					Int @id
	pointsPerDay			Float
	remainderPoints			Float
	skillTypeID				Int
	startedAt				String
}

model Blueprint {
	itemID					Int @id
	character				Character[]
	locationFlag			LocationFlag
	locationID				Int
	materialEfficiency		Int
	quantity				Int
	runs					Int
	timeEfficiency			Int
	typeID					Int
}

model CorpHistory {
	character				Character[]
	corporationID			Int
	recordID				Int @id
	startDate				DateTime
	isDeleted				Boolean @default(false)
}

model Fatigue {
	characterID				String @id
	character				Character @relation(fields: [characterID], references: [characterID])
	lastJumpDate			DateTime
	lastUpdateDate			DateTime
	jumpFatigueExpireDate	DateTime
}

model Medal {
	character				Character[]
	corporationID 			Int
	date 					DateTime
	description				String
	graphics				String
	issuerID 				Int
	medalID 				Int @id
	reason 					String
	status					Status
	title 					String
}

model Notification {
	characterID				String
	character				Character[]
	isRead					Boolean @default(false)
	notificationID			Int @id
	senderID				Int
	senderType				SenderType
	text					String?
	timestamp				DateTime
	type					MessageType
}

model ContactNotification {
	characterID				String
	notification			Character[]
	message 				String
	notificationID			Int @id
	sendDate				DateTime
	senderCharacterID		Int
	standingLevel			Float
}

// model CorpRoles {
// 	characterID				BigInt @unique
// 	character				Character @relation(fields: [characterID], references: [characterID])
// 	//TODO: make all rols lists of strings after Postgres is implemented
// 	roles					String
// 	rolesAtBase				String
// 	rolesAtHQ				String
// 	rolesAtOther			String
// }

// model Standings {
// 	characterID				BigInt
// 	character				Character @relation(fields: [characterID], references: [characterID])
// 	fromID					Int @unique
// 	fromType				String
// 	standing				Float
// }

// model Title {
// 	characterID				BigInt @unique
// 	character				Character @relation(fields: [characterID], references: [characterID])
// 	titleID					Int
// 	name					String
// }
